# 네코챗 예약 템플릿

네코챗에서 지원하는 예약 템플릿(reserved templates) 목록. 대화/페르소나/시스템 프롬프트 어디서든 사용 가능, 출력 시 자동 치환/처리.

---

## 1. 기본 치환

| 템플릿 | 설명 | 출력 예시 |
|--------|------|-----------|
| `{{char}}` | 현재 캐릭터 이름 | `윤서연` |
| `{{user}}` | 현재 활성 페르소나 이름 | `플레이어` |

```
시스템: "{{char}}는 {{user}}의 소꿉친구이다."
→ 실제: "윤서연는 플레이어의 소꿉친구이다."
```

---

## 2. 표시 제어

| 템플릿 | 유저 화면 | 모델 전송 | 용도 |
|--------|-----------|-----------|------|
| `{{ui:내용}}` | 보임 | 제거됨 | 유저에게만 보여줄 UI 요소 |
| `{{hidden:내용}}` | 숨김 | 전송됨 | AI만 인지하는 숨겨진 데이터 |

### `{{ui:내용}}` — 화면 전용 (모델 비전송)

화면에 렌더링, 모델에는 제거. 토큰 미소모.

```
{{ui:
📊 현재 호감도 추정치
서연: ★★★☆☆ | 하윤: ★★☆☆☆ | 유나: ★★★★☆
}}
```

적합 용도: 유저용 가이드, 조작 UI 안내, 토큰 안 쓰는 장식 상태창

### `{{hidden:내용}}` — AI 전용 (화면 비표시)

AI 출력 시 컨텍스트에 잔류, 유저 화면엔 미표시.

```
{{hidden:
♡:서연32/하윤15/유나57/소하8/Emily12/지우50/채원0/소율5/율희표20내5
잔액:872000 Day:15 시간:14:30 요일:월 날씨:맑음
}}
```

적합 용도: 숨겨진 수치 추적, 게임 상태 영속성, 디버그용 내부 로그

**주의:**
- 매 턴 hidden 블록이 히스토리에 쌓임 → 장기 플레이 시 컨텍스트 누적 주의
- AI가 이전 hidden 값 복사 시 숫자 오류 가능 (예: 32→23)
- 가능한 압축된 포맷으로 작성

---

## 3. 난수 생성

| 템플릿 | 설명 | 범위 | 출력 예시 |
|--------|------|------|-----------|
| `{{dN}}` | 1~N 난수 | N: 1~10000 | `{{d100}}` → `73` |
| `{{d시작-끝}}` | 시작~끝 범위 난수 | 각 값: 1~10000 | `{{d5-1000}}` → `427` |
| `{{dN:s}}` | 세션 고정 난수 | 동일 | `{{d100:s}}` → `42` (세션 내 항상 42) |
| `{{dN:s:라벨}}` | 라벨별 세션 고정 난수 | 동일 | `{{d100:s:luck}}` → `88` |

### `{{dN}}` — 기본 난수

매 턴 랜덤:
```
판정: {{d100}}     → 73, 15, 91 ...
오늘의 날씨: {{d4}}  → 1=맑음, 2=흐림, 3=비, 4=눈
```

### `{{d시작-끝}}` — 범위 지정
```
알바 시급 보너스: +{{d500-2000}}원  → "+1,340원"
```

### `{{dN:s}}` — 세션 고정
```
①의 행운 수치: {{d100:s}}  → 처음에 42면 세션 내 계속 42
```

### `{{dN:s:라벨}}` — 라벨별 세션 고정
```
①의 매력: {{d20:s:charm}}     → 항상 14
①의 운:   {{d20:s:luck}}      → 항상 7
①의 체력: {{d20:s:stamina}}   → 항상 18
```

캐릭터 생성:
```
#주인공 초기 스탯 (세션 고정)
외형: {{d5-15:s:look}} / 매력: {{d5-15:s:charm}} / 운: {{d5-15:s:luck}}
```

---

## 4. 비중복 랜덤 배정

| 템플릿 | 설명 |
|--------|------|
| `{{shuffleIndex}}` | 같은 구간 내 등장 수만큼 1..N을 중복 없이 랜덤 배정 |

```
서연의 순서: {{shuffleIndex}}
하윤의 순서: {{shuffleIndex}}
유나의 순서: {{shuffleIndex}}
→ 서연:2 / 하윤:3 / 유나:1
```

---

## 5. 시간

| 템플릿 | 설명 | 출력 예시 |
|--------|------|-----------|
| `{{timestamp}}` | 현재 시각 (기본: `yyyy-MM-dd HH:mm`) | `2026-02-18 14:30` |
| `{{timestamp:포맷}}` | 지정 포맷 | 아래 참조 |

| 포맷 | 출력 |
|------|------|
| `{{timestamp:yyyy-MM-dd}}` | `2026-02-18` |
| `{{timestamp:HH:mm:ss}}` | `14:30:25` |
| `{{timestamp:yyyy년 MM월 dd일}}` | `2026년 02월 18일` |

```
{{hidden:현실시각={{timestamp:HH:mm}} → 게임 내 시간 참조용}}
{{ui:마지막 업데이트: {{timestamp:MM/dd HH:mm}}}}
```

---

## 6. 사주 변환

```
{{saju:2026-02-18 14:30|1987-01-06 12:34}}
→ 해당 생년월일의 사주팔자(시주 포함) 출력
```

---

## 7. 치환 템플릿 (사용자 정의 변수)

사용자가 직접 등록하는 예약어. 키-값 쌍으로 자동 교체.

| 특성 | 설명 |
|------|------|
| 등록 가능 수 | 최대 10개 |
| 값 제한 | 각 최대 500자 |
| 적용 범위 | 대화, 페르소나 내 자동 교체 |

배치 예시:
| # | 키 | 값 | 용도 |
|---|-----|-----|------|
| 1 | `{{c1}}` | 윤서연 | 히로인1 |
| 2 | `{{c2}}` | 강하윤 | 히로인2 |
| 3 | `{{school}}` | 청림대학교 | 학교명 |
| 4 | `{{area}}` | 한별구 | 지역명 |

장점: 이름 변경 시 템플릿 값만 수정 → 전체 일괄 반영.
주의: 장문 저장에는 부적합 (500자 제한 + 변수 치환 목적).

---

## 8. 요약표

| 템플릿 | 분류 | 동적 | 핵심 용도 |
|--------|------|------|-----------|
| `{{char}}` | 기본 치환 | 정적 | 캐릭터 이름 |
| `{{user}}` | 기본 치환 | 정적 | 페르소나 이름 |
| `{{ui:...}}` | 표시 제어 | - | 유저 전용 (토큰 절약) |
| `{{hidden:...}}` | 표시 제어 | - | AI 전용 (상태 추적) |
| `{{dN}}` | 난수 | 매번 | 판정, 확률 이벤트 |
| `{{d시작-끝}}` | 난수 | 매번 | 범위 지정 |
| `{{dN:s}}` | 난수 | 세션 고정 | 캐릭터 고정 수치 |
| `{{dN:s:라벨}}` | 난수 | 세션 고정 | 라벨별 독립 고정 |
| `{{shuffleIndex}}` | 배정 | 매번 | 중복 없는 순서 |
| `{{timestamp}}` | 시간 | 실시간 | 현재 시각 |
| `{{saju:...\|...}}` | 변환 | 입력 기반 | 사주팔자 |
| `{{키}}` (사용자 정의) | 치환 | 정적 | 이름/장소 변수화 |
